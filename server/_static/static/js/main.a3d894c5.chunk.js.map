{"version":3,"sources":["apis/myAPI.js","actions/latest_rates.js","actions/coin_types.js","actions/history_rates.js","consts.js","actions/curr_fiat.js","reportWebVitals.js","reducers/curr_fiat_reducer.js","reducers/latest_rates_reducer.js","reducers/coin_types_reducer.js","reducers/history_rates_reducer.js","reducers/error_reducer.js","reducers/loading_reducer.js","reducers/index.js","comps/misc/hoc/withLoading/index.js","comps/misc/hoc/withLoading/withLoading.js","comps/CoinList/CoinListItem/index.js","comps/CoinList/CoinListItem/CoinListItem.js","comps/CoinList/CoinList.js","comps/CoinList/index.js","comps/CoinHistory/CoinHistory.js","comps/CoinHistory/index.js","comps/App/App.js","comps/App/index.js","index.js"],"names":["ROOT_URL","myAPI","getLatestRates","a","axios","get","latest_rates","data","getCoinTypes","coin_types","getHistoryRatesBySymbol","symbol","history_rates","FETCH_LATEST_RATES_REQUEST","FETCH_LATEST_RATES_SUCCESS","FETCH_LATEST_RATES_FAILURE","fetchLatestRates","dispatch","type","payload","console","log","message","setTimeout","FETCH_COIN_TYPES_REQUEST","FETCH_COIN_TYPES_SUCCESS","FETCH_COIN_TYPES_FAILURE","fetchCoinTypes","FETCH_HISTORY_RATES_REQUEST","FETCH_HISTORY_RATES_SUCCESS","FETCH_HISTORY_RATES_FAILURE","fetchHistoryRates","module","exports","UPDATE_TIMER_MINUTES","SET_CURR_FIAT","setCurrFiat","fiatStr","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ACTIONS","require","curr_fiat_reducer","state","action","latest_rates_reducer","mapCoinTypes","_","keyBy","history_rates_reducer","errorReducer","matches","exec","requestName","requestState","newState","loadingReducer","combineReducers","curr_fiat","error","loading","withLoading","WrappedComponent","fetchStr","WithLoading","this","props","React","Component","connect","isLoading","isError","CoinListItem","className","coin","rates","onClick","avgRate","round","reduce","acc","source","rate","length","isNaN","coin_sym","toLocaleString","map","source_name","moment","at","format","source_id","CoinListWithLoading","withRouter","history","filter","coin_type_id","coin_id","push","CoinList","CoinHistory","orderBy","index","isEmpty","to","history_rates_obj","groupBy","renderSourceHistory","ownProps","match","params","coin_symbol","AppWithLoading","updateTimer","setInterval","clearInterval","path","exact","App","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","thunk","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"sKAEMA,EAAmD,4BAEnDC,EAAQ,CACZC,eAAe,WAAD,4BAAE,4BAAAC,EAAA,sEACaC,IAAMC,IAAN,UAAaL,EAAb,uBADb,cACRM,EADQ,yBAEPA,EAAaC,MAFN,2CAAF,kDAAC,GAIfC,aAAa,WAAD,4BAAI,4BAAAL,EAAA,sEACWC,IAAMC,IAAN,UAAaL,EAAb,gBADX,cACRS,EADQ,yBAEPA,EAAWF,MAFJ,2CAAJ,kDAAC,GAIbG,wBAAwB,WAAD,4BAAE,WAAOC,GAAP,eAAAR,EAAA,sEACKC,IAAMC,IAAN,UAAaL,EAAb,uBAAoCW,IADzC,cACjBC,EADiB,yBAEhBA,EAAcL,MAFE,2CAAF,mDAAC,IAMXN,O,6SCjBFY,EAAuC,6BACvCC,EAAuC,6BACvCC,EAAuC,6BAEvCC,EAAmB,SAAnBA,IAAmB,8CAAM,WAAMC,GAAN,eAAAd,EAAA,sEAElCc,EAAS,CAACC,KAAML,IAFkB,SAGPZ,IAAMC,iBAHC,OAG5BI,EAH4B,OAIlCW,EAAS,CAACC,KAAMJ,EAA6BK,QAASb,IAJpB,gDAMlCc,QAAQC,IAAI,KAAEC,SACdL,EAAS,CAACC,KAAMH,EAA4BI,QAAQ,EAAD,KACnDI,YAAW,WACTP,IAAmBC,KACnB,KAVgC,yDAAN,wD,qSCJnBO,EAAqC,2BACrCC,EAAqC,2BACrCC,EAAqC,2BAErCC,EAAiB,SAAjBA,IAAiB,8CAAM,WAAMV,GAAN,eAAAd,EAAA,sEAEhCc,EAAS,CAACC,KAAMM,IAFgB,SAGPvB,IAAMO,eAHC,OAG1BC,EAH0B,OAIhCQ,EAAS,CAACC,KAAMO,EAA2BN,QAASV,IAJpB,gDAMhCW,QAAQC,IAAI,KAAEC,SACdL,EAAS,CAACC,KAAMQ,EAA0BP,QAAQ,EAAD,KACjDI,YAAW,WACTI,IAAiBV,KACjB,KAV8B,yDAAN,wD,iTCJjBW,EAAwC,8BACxCC,EAAwC,8BACxCC,EAAwC,8BAExCC,EAAoB,SAACpB,GAAD,8CAAY,WAAMM,GAAN,eAAAd,EAAA,sEAEzCc,EAAS,CAACC,KAAMU,IAFyB,SAGb3B,IAAMS,wBAAwBC,GAHjB,OAGnCC,EAHmC,OAIzCK,EAAS,CAACC,KAAMW,EAA8BV,QAASP,IAJd,gDAMzCQ,QAAQC,IAAI,KAAEC,SACdL,EAAS,CAACC,KAAMY,EAA6BX,QAAQ,EAAD,KAPX,yDAAZ,wD,iBCFjCa,EAAOC,QAJQ,CACbC,qBAAsB,I,gCCDxB,iGAAO,IAAMC,EAA2B,gBAE3BC,EAAc,SAACC,GAC1B,MAAO,CACLnB,KAAMiB,EACNhB,QAASkB,K,uKCOEC,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,O,gCCPRQ,EAAUC,EAAQ,IAYTC,EAVW,WAA0B,IAAzBC,EAAwB,uDAAlB,MAAOC,EAAW,uCACjD,OAAOA,EAAOjC,MACZ,KAAK6B,EAAQZ,cACX,OAAOgB,EAAOhC,QAEhB,QACE,OAAO+B,ICRPH,EAAUC,EAAQ,IAYTI,EAVc,WAAyB,IAAxBF,EAAuB,uDAAjB,KAAMC,EAAW,uCACnD,OAAOA,EAAOjC,MACZ,KAAK6B,EAAQjC,2BACX,OAAOqC,EAAOhC,QAEhB,QACE,OAAO+B,I,wBCPPH,EAAUC,EAAQ,IAcTI,EAXc,WAAuB,IAAtBF,EAAqB,uDAAf,GAAIC,EAAW,uCACjD,OAAOA,EAAOjC,MACZ,KAAK6B,EAAQtB,yBACX,IAAI4B,EAAY,2BAAOH,GAAUI,IAAEC,MAAMJ,EAAOhC,QAAS,aACzD,OAAOkC,EAET,QACE,OAAOH,I,QCXPH,EAAUC,EAAQ,IAaTQ,EAVe,WAAuB,IAAtBN,EAAqB,uDAAf,GAAIC,EAAW,uCAClD,OAAOA,EAAOjC,MACZ,KAAK6B,EAAQlB,4BACX,MAAM,GAAN,mBAAWqB,GAAX,YAAqBC,EAAOhC,UAE9B,QACE,OAAO+B,I,gBCIEO,EAZM,WAAyB,IAAxBP,EAAuB,uDAAf,GAAIC,EAAW,uCACnCjC,EAAkBiC,EAAlBjC,KAAMC,EAAYgC,EAAZhC,QACRuC,EAAU,yBAAyBC,KAAKzC,GAG9C,IAAKwC,EAAS,OAAOR,EALsB,kBAMLQ,EANK,GAMlCE,EANkC,KAMrBC,EANqB,KAOrCC,EAAQ,2BAAOZ,GAAP,kBAAeU,EAA+B,YAAjBC,EAA6B1C,GAAWA,EAAQG,QAAU,KAErG,OAAOwC,GCMMC,EAfQ,WAAyB,IAAxBb,EAAuB,uDAAf,GAAIC,EAAW,uCACrCjC,EAASiC,EAATjC,KACFwC,EAAU,iCAAiCC,KAAKzC,GAGtD,IAAKwC,EAAS,OAAOR,EALwB,kBAOPQ,EAPO,GAOpCE,EAPoC,KAOvBC,EAPuB,KAQvCC,EAAQ,2BACTZ,GADS,kBAEXU,EAA+B,YAAjBC,IAEjB,OAAOC,GCLME,cAAgB,CAC3BC,YACA3D,eACAG,aACAG,gBACAsD,QACAC,Y,uECbWC,ECEK,SAACC,EAAkBC,GACrC,IAEMC,EAH4C,uKAK9C,OAAO,cAACF,EAAD,eAAsBG,KAAKC,YALY,GAGxBC,IAAMC,WAKhC,OAAOC,aAPiB,SAAC,GAAsB,IAArBT,EAAoB,EAApBA,QAASD,EAAW,EAAXA,MAAa,MAAO,CAAEW,UAAWV,EAAQG,GAAWQ,QAASZ,EAAMI,MAO/FM,CAAyBL,I,+BCVnBQ,EC+BAH,aADS,SAAC,GAAkB,MAAO,CAAEX,UAAX,EAAfA,aACXW,EA1BM,SAAC,GAAkD,IAAjDI,EAAgD,EAAhDA,UAAWC,EAAqC,EAArCA,KAAMC,EAA+B,EAA/BA,MAAOjB,EAAwB,EAAxBA,UAAWkB,EAAa,EAAbA,QAClDC,EAAU9B,IAAE+B,MAAMH,EAAMI,QAAO,SAACC,EAAKC,GAAN,OAAiBD,EAAIC,EAAOC,OAAK,GAAGP,EAAMQ,OAAO,GACtF,OAAGC,MAAMP,IAAsB,IAAVA,EAAoB,KAEvC,sBAAKJ,UAAS,uBAAkBA,GAAaG,QAASA,EAAtD,UACE,mCACE,qBAAKH,UAAU,SAAf,SAAyBC,EAAKW,WAC9B,sBAAKZ,UAAU,MAAf,UAAsBI,EAAQS,iBAA9B,IAAiD5B,QAEnD,sBAAKe,UAAU,UAAf,UACE,wBAAQA,UAAU,WAAlB,mCACCE,EAAMY,KAAI,SAAAN,GACT,OACE,sBAAKR,UAAU,SAAf,UACE,qBAAKA,UAAU,OAAf,SAAuBQ,EAAOO,cAC9B,sBAAKf,UAAU,QAAf,UAAwB1B,IAAE+B,MAAMG,EAAOC,KAAK,GAAGI,iBAA/C,IAAkE5B,KAClE,qBAAKe,UAAU,KAAf,SAAqBgB,IAAOR,EAAOS,IAAIC,OAAO,mBAHnBV,EAAOW,uBCQ1CC,EAAsBC,YAAWjC,GAnBtB,SAACK,GAAW,IACpBO,EAAoEP,EAApEO,UAAWH,EAAyDJ,EAAzDI,UAAWC,EAA8CL,EAA9CK,QAASxE,EAAqCmE,EAArCnE,aAAcG,EAAuBgE,EAAvBhE,WAAY6F,EAAW7B,EAAX6B,QAChE,OAAGzB,EAAuB,6CACvBC,EAAuB,yCACtBxE,GAAiBG,EAGnB,qBAAKuE,UAAS,mBAAcA,GAA5B,SACK1B,IAAEwC,IAAIrF,GAAY,SAAAwE,GACjB,OAAQ,cAAC,EAAD,CAAgBD,UAAU,OAA2BC,KAAMA,EAC3CC,MAAO5E,EAAaiG,QAAO,SAAAd,GAAI,OAAIA,EAAKe,eAAevB,EAAKwB,WAC5DtB,QAAS,kBAAMmB,EAAQI,KAAR,mBAAyBzB,EAAKW,aAFvBX,EAAKW,eALlB,OAekB,uBC1B9Ce,ED2BA/B,aAFS,SAAC,GAA4C,MAAO,CAAEtE,aAAX,EAAzCA,aAAkE2D,UAAzB,EAA3BA,UAA+DxD,WAApC,EAAhBA,cAEpCmE,CAAyBwB,G,gBEnBlCQ,E,kLACgB,IAAD,EACapC,KAAKC,MAA5B7D,EADU,EACVA,cAAeqE,EADL,EACKA,KAClBA,IAEuB,IAAvBrE,EAAc8E,QAAmF,IAArE9E,EAAc2F,QAAO,SAAAd,GAAI,OAAIA,EAAKG,WAAWX,EAAKW,YAAUF,QAC1FlB,KAAKC,MAAM1C,kBAAkBkD,EAAKW,a,0CAElBG,EAAanF,GAAe,IAAD,OAC7C,OACE,sBAAKoE,UAAU,iBAAf,UACE,iCAASe,IACT,+BACGzC,IAAEuD,QAAQjG,EAAe,KAAM,QAAQkF,KAAI,SAACL,EAAKqB,GAChD,OACE,sBAAK9B,UAAU,SAAf,UACE,8BAAMgB,IAAOP,EAAKQ,IAAIC,OAAO,oBAC7B,gCAAM5C,IAAE+B,MAAMI,EAAKA,KAAK,GAAGI,iBAA3B,IAA8C,EAAKpB,MAAMR,eAF9B6C,UALAf,K,+BAehC,IAAD,SACkDvB,KAAKC,MAAtDQ,EADD,EACCA,KAAMxE,EADP,EACOA,WAAYH,EADnB,EACmBA,aAAcM,EADjC,EACiCA,cACvC,IAAI0C,IAAEyD,QAAQtG,KAAgBwE,EAAM,OAAO,cAAC,IAAD,CAAU+B,GAAG,UACxD,IAAI1G,EAAc,OAAO,KACzB,IAAI2G,EAAoB3D,IAAE4D,QAAQtG,EAAe,eAEjD,OACE,sBAAKoE,UAAS,2BAAsBR,KAAKC,MAAMO,WAA/C,UACE,mCACE,cAAC,EAAD,CAAgBA,UAAU,OAAOC,KAAMA,EACvBC,MAAO5E,EAAaiG,QAAO,SAAAd,GAAI,OAAIA,EAAKe,eAAevB,EAAKwB,WAC5DtB,QAAS,kBAAM,EAAKV,MAAM6B,QAAQI,KAAnB,YAHjC,OAMA,sBAAM1B,UAAU,UAAhB,SACG1B,IAAEwC,IAAImB,GAAmB,SAACrG,EAAemF,GACxC,OAAO,EAAKoB,oBAAoBpB,EAAanF,e,GAzC/B+D,aCRXiC,EDgEAP,YAAWzB,aAPF,SAAC,EAAsDwC,GAAc,IAAnEnD,EAAkE,EAAlEA,UAAWxD,EAAuD,EAAvDA,WAAYH,EAA2C,EAA3CA,aAAcM,EAA6B,EAA7BA,cAA8B,MAAO,CAClGqD,YACAgB,KAAMxE,EAAW2G,EAASC,MAAMC,OAAOC,aACvC9G,aACAH,eACAM,mBAEiD,CAACmB,uCAA1B6C,CAA8CgC,IEvBlEY,EAAiBpD,E,kLA5BhBd,IAAEyD,QAAQvC,KAAKC,MAAMhE,aACtB+D,KAAKC,MAAM9C,iBAEb6C,KAAKC,MAAMzD,mBACXwD,KAAKiD,YAAcC,YAAYlD,KAAKC,MAAMzD,iBAAuC,GAArBkB,uBAAwB,O,6CAGpFyF,cAAcnD,KAAKiD,e,+BAEZ,IAAD,EACuBjD,KAAKC,MAA3BI,EADD,EACCA,UAAWC,EADZ,EACYA,QAClB,OAAGD,EAAmB,6CACnBC,EAAmB,iEAEpB,qBAAKE,UAAU,MAAf,SACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAQ4C,KAAK,wBAAyBC,OAAK,EAA3C,SAA4C,cAAC,EAAD,MAC5C,cAAC,IAAD,CAAQD,KAAK,QAAyBC,OAAK,EAA3C,SAA4C,cAAC,EAAD,CAAU7C,UAAU,WAChE,cAAC,IAAD,CAAQ4C,KAAK,IAAb,SACE,cAAC,IAAD,CAAUZ,GAAG,qB,GArBPrC,aA8BsB,oBCzCzBmD,ED0CAlD,aAFS,SAAC,GAAiC,MAAO,CAAEnE,WAAX,EAA9BA,WAAqDH,aAAvB,EAAlBA,gBAEE,CAACqB,gCAAgBX,qCAA1C4D,CAA6D4C,GEjCtEO,EAAmBC,OAAOC,sCAAwCC,IAClEC,EAAQC,YACZC,EACAN,EAAiBO,YAAgBC,OAGnCC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,CAAUP,MAAOA,EAAjB,SACE,cAAC,IAAD,UACE,cAAC,EAAD,UAILQ,SAASC,eAAe,SAG3BtG,M","file":"static/js/main.a3d894c5.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nconst ROOT_URL = (process.env.NODE_ENV==='production') ? 'http://localhost:3000/api' : \"http://localhost:3000/api\";  //production will be used another url\r\n\r\nconst myAPI = {\r\n  getLatestRates: async () => {\r\n    const latest_rates = await axios.get(`${ROOT_URL}/coin-rates/latest`);\r\n    return latest_rates.data;\r\n  },\r\n  getCoinTypes:   async () => {\r\n    const coin_types = await axios.get(`${ROOT_URL}/coin-types`);\r\n    return coin_types.data;\r\n  },\r\n  getHistoryRatesBySymbol: async (symbol) => {\r\n    const history_rates = await axios.get(`${ROOT_URL}/coin-rates/${symbol}`);\r\n    return history_rates.data;\r\n  }\r\n}\r\n\r\nexport default myAPI;\r\n","import myAPI   from '../apis/myAPI';\r\n\r\nexport const FETCH_LATEST_RATES_REQUEST     =       'FETCH_LATEST_RATES_REQUEST';\r\nexport const FETCH_LATEST_RATES_SUCCESS     =       'FETCH_LATEST_RATES_SUCCESS';\r\nexport const FETCH_LATEST_RATES_FAILURE     =       'FETCH_LATEST_RATES_FAILURE';\r\n\r\nexport const fetchLatestRates = () => async dispatch => {\r\n  try{\r\n    dispatch({type: FETCH_LATEST_RATES_REQUEST});\r\n    const latest_rates = await myAPI.getLatestRates();    \r\n    dispatch({type: FETCH_LATEST_RATES_SUCCESS,  payload: latest_rates});\r\n  }catch(e){\r\n    console.log(e.message);\r\n    dispatch({type: FETCH_LATEST_RATES_FAILURE, payload: e});\r\n    setTimeout(function(){\r\n      fetchLatestRates()(dispatch); //will try fetching again after timer.\r\n    },7000);\r\n  }\r\n}\r\n","import myAPI   from '../apis/myAPI';\r\n\r\nexport const FETCH_COIN_TYPES_REQUEST     =       'FETCH_COIN_TYPES_REQUEST';\r\nexport const FETCH_COIN_TYPES_SUCCESS     =       'FETCH_COIN_TYPES_SUCCESS';\r\nexport const FETCH_COIN_TYPES_FAILURE     =       'FETCH_COIN_TYPES_FAILURE';\r\n\r\nexport const fetchCoinTypes = () => async dispatch => {\r\n  try{\r\n    dispatch({type: FETCH_COIN_TYPES_REQUEST});\r\n    const coin_types = await myAPI.getCoinTypes();    \r\n    dispatch({type: FETCH_COIN_TYPES_SUCCESS,  payload: coin_types});\r\n  }catch(e){\r\n    console.log(e.message);\r\n    dispatch({type: FETCH_COIN_TYPES_FAILURE, payload: e});\r\n    setTimeout(function(){\r\n      fetchCoinTypes()(dispatch); //will try fetching again after timer.\r\n    },7000);\r\n  }\r\n}\r\n","import myAPI   from '../apis/myAPI';\r\n\r\nexport const FETCH_HISTORY_RATES_REQUEST     =       'FETCH_HISTORY_RATES_REQUEST';\r\nexport const FETCH_HISTORY_RATES_SUCCESS     =       'FETCH_HISTORY_RATES_SUCCESS';\r\nexport const FETCH_HISTORY_RATES_FAILURE     =       'FETCH_HISTORY_RATES_FAILURE';\r\n\r\nexport const fetchHistoryRates = (symbol) => async dispatch => {\r\n  try{\r\n    dispatch({type: FETCH_HISTORY_RATES_REQUEST});\r\n    const history_rates = await myAPI.getHistoryRatesBySymbol(symbol);    \r\n    dispatch({type: FETCH_HISTORY_RATES_SUCCESS,  payload: history_rates});\r\n  }catch(e){\r\n    console.log(e.message);\r\n    dispatch({type: FETCH_HISTORY_RATES_FAILURE, payload: e});\r\n  }\r\n}\r\n","const consts = {\r\n  UPDATE_TIMER_MINUTES: 5\r\n}\r\n\r\nmodule.exports = consts;\r\n","export const SET_CURR_FIAT      =       'SET_CURR_FIAT';\r\n\r\nexport const setCurrFiat = (fiatStr) => {\r\n  return {\r\n    type: SET_CURR_FIAT,\r\n    payload: fiatStr\r\n  }\r\n}\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","const ACTIONS = require('../actions/curr_fiat');\r\n\r\nconst curr_fiat_reducer = (state='USD', action) => {\r\n  switch(action.type){\r\n    case ACTIONS.SET_CURR_FIAT:\r\n      return action.payload;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default curr_fiat_reducer;\r\n","const ACTIONS = require('../actions/latest_rates');\r\n\r\nconst latest_rates_reducer = (state=null, action) => {\r\n  switch(action.type){\r\n    case ACTIONS.FETCH_LATEST_RATES_SUCCESS:\r\n      return action.payload;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default latest_rates_reducer;\r\n","import _ from 'lodash';\r\nconst ACTIONS = require('../actions/coin_types');\r\n\r\n\r\nconst latest_rates_reducer = (state={}, action) => {\r\n  switch(action.type){\r\n    case ACTIONS.FETCH_COIN_TYPES_SUCCESS:\r\n      let mapCoinTypes = {...state, ..._.keyBy(action.payload, 'coin_sym')}; //convert array to mapped object\r\n      return mapCoinTypes;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default latest_rates_reducer;\r\n","const ACTIONS = require('../actions/history_rates');\r\n\r\n\r\nconst history_rates_reducer = (state=[], action) => {\r\n  switch(action.type){\r\n    case ACTIONS.FETCH_HISTORY_RATES_SUCCESS:\r\n      return [...state, ...action.payload];\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default history_rates_reducer;\r\n","\r\nconst errorReducer = (state = {}, action) => {\r\n  const { type, payload } = action;\r\n  const matches = /(.*)_(REQUEST|FAILURE)/.exec(type);\r\n\r\n  // not a *_REQUEST / *_FAILURE actions, so we ignore them\r\n  if (!matches) return state;\r\n  const [, requestName, requestState] = matches;\r\n  const newState = {...state, [requestName]: requestState === 'FAILURE' ? payload && payload.message : '',};  \r\n\r\n  return newState;\r\n};\r\n\r\nexport default errorReducer;\r\n","\r\nconst loadingReducer = (state = {}, action) => {\r\n  const { type } = action;\r\n  const matches = /(.*)_(REQUEST|SUCCESS|FAILURE)/.exec(type);\r\n\r\n  // not a *_REQUEST / *_SUCCESS /  *_FAILURE actions, so we ignore them\r\n  if (!matches) return state;\r\n\r\n  const [, requestName, requestState] = matches;  \r\n  const newState = {\r\n    ...state,\r\n    [requestName]: requestState === 'REQUEST',\r\n  };\r\n  return newState;\r\n};\r\n\r\nexport default loadingReducer;\r\n","import { combineReducers }  from 'redux';\r\nimport curr_fiat            from './curr_fiat_reducer';\r\nimport latest_rates         from './latest_rates_reducer';\r\nimport coin_types           from './coin_types_reducer';\r\nimport history_rates        from './history_rates_reducer';\r\nimport error                from './error_reducer';\r\nimport loading              from './loading_reducer';\r\n\r\nexport default combineReducers({\r\n    curr_fiat,\r\n    latest_rates,\r\n    coin_types,\r\n    history_rates,\r\n    error,\r\n    loading\r\n})\r\n","import withLoading from './withLoading';\r\nexport default withLoading;\r\n","import React      from 'react';\r\nimport {connect}  from 'react-redux';\r\n\r\nconst withLoading = (WrappedComponent, fetchStr) => {\r\n  const mapStateToProps = ({loading, error}) => { return { isLoading: loading[fetchStr], isError: error[fetchStr] }};\r\n  \r\n  class WithLoading extends React.Component {\r\n    render() {\r\n      return <WrappedComponent {...this.props}/>;\r\n    }\r\n  };\r\n  return connect(mapStateToProps)(WithLoading);\r\n}\r\n\r\n\r\nexport default withLoading;\r\n","import CoinListItem from './CoinListItem';\r\nexport default CoinListItem;\r\n","import React from 'react';\r\nimport './CoinListItem.scss';\r\nimport {connect} from 'react-redux';\r\nimport _ from 'lodash';\r\nimport moment from 'moment';\r\n\r\nconst CoinListItem = ({className, coin, rates, curr_fiat, onClick}) => {\r\n  const avgRate = _.round(rates.reduce((acc, source) => acc+source.rate,0)/rates.length,2);\r\n  if(isNaN(avgRate) || avgRate===0) return null;\r\n  return (\r\n    <div className={`CoinListItem ${className}`} onClick={onClick}>\r\n      <header>\r\n        <div className='symbol'>{coin.coin_sym}</div>\r\n        <div className='avg'>{avgRate.toLocaleString()} {curr_fiat}</div>\r\n      </header>\r\n      <div className='sources'>\r\n        <header className='full-row'>Sources Latest Prices</header>\r\n        {rates.map(source => {\r\n          return (\r\n            <div className='source' key={source.source_id}>\r\n              <div className='name'>{source.source_name}</div>\r\n              <div className='price'>{_.round(source.rate,2).toLocaleString()} {curr_fiat}</div>\r\n              <div className='at'>{moment(source.at).format('DD/MM HH:mm')}</div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = ({curr_fiat}) => { return { curr_fiat }};\r\nexport default connect(mapStateToProps)(CoinListItem);\r\n","import React from 'react';\r\nimport './CoinList.scss';\r\nimport _ from 'lodash';\r\nimport {connect}            from 'react-redux';\r\nimport {withRouter}         from 'react-router-dom';\r\nimport withLoading          from '../misc/hoc/withLoading';\r\nimport CoinListItem         from './CoinListItem';\r\n\r\nconst CoinList = (props) => {\r\n  const {className, isLoading, isError, latest_rates, coin_types, history} = props;\r\n  if(isLoading)     return (<div>loading...</div>);\r\n  if(isError)       return (<div>error!</div>);\r\n  if(!latest_rates || !coin_types)  return null;\r\n\r\n  return (\r\n    <div className={`CoinList ${className}`}>\r\n        {_.map(coin_types, coin => { //map over object keys! lodash do it automatically whether it's an array or an object\r\n          return  <CoinListItem   className='card' key={coin.coin_sym} coin={coin}\r\n                                  rates={latest_rates.filter(rate => rate.coin_type_id===coin.coin_id)}\r\n                                  onClick={() => history.push(`/history/${coin.coin_sym}`)}\r\n                  />;\r\n        })}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = ({latest_rates, curr_fiat, coin_types}) => { return { latest_rates, curr_fiat, coin_types }};\r\nconst CoinListWithLoading = withRouter(withLoading(CoinList, 'FETCH_LATEST_RATES'));\r\nexport default connect(mapStateToProps)(CoinListWithLoading);\r\n","import CoinList from './CoinList';\r\nexport default CoinList;\r\n","import React,{Component} from 'react';\r\nimport './CoinHistory.scss';\r\nimport _ from 'lodash';\r\nimport moment from 'moment';\r\nimport {connect} from 'react-redux';\r\nimport {fetchHistoryRates}    from '../../actions/history_rates';\r\nimport {withRouter, Redirect} from 'react-router-dom'\r\nimport CoinListItem           from '../CoinList/CoinListItem';\r\n\r\nclass CoinHistory extends Component{\r\n  componentDidMount(){\r\n    const {history_rates, coin} = this.props;\r\n    if(!coin) //page refreshed! no data has been fetched yet.\r\n      return;\r\n    if((history_rates.length===0 || history_rates.filter(rate => rate.coin_sym===coin.coin_sym).length===0))\r\n      this.props.fetchHistoryRates(coin.coin_sym);\r\n  }\r\n  renderSourceHistory(source_name, history_rates){\r\n    return (\r\n      <div className='source-history' key={source_name}>\r\n        <header>{source_name}</header>\r\n        <main>\r\n          {_.orderBy(history_rates, 'at', 'desc').map((rate,index) => {\r\n            return (\r\n              <div className='record' key={index}>\r\n                <div>{moment(rate.at).format('DD/MM/YY HH:mm')}</div>\r\n                <div>{_.round(rate.rate,2).toLocaleString()} {this.props.curr_fiat}</div>\r\n              </div>\r\n            );\r\n          })}\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n  render(){\r\n    const {coin, coin_types, latest_rates, history_rates} = this.props;\r\n    if(!_.isEmpty(coin_types) && !coin) return <Redirect to='/home'/>;\r\n    if(!latest_rates) return null;\r\n    let history_rates_obj = _.groupBy(history_rates, 'source_name');\r\n\r\n    return(\r\n      <div className={`CoinHistory page ${this.props.className}`}>\r\n        <header>\r\n          <CoinListItem   className='card' coin={coin}\r\n                          rates={latest_rates.filter(rate => rate.coin_type_id===coin.coin_id)}\r\n                          onClick={() => this.props.history.push(`/home`)}\r\n          />;\r\n        </header>\r\n        <main className='history'>\r\n          {_.map(history_rates_obj, (history_rates, source_name) => {\r\n            return this.renderSourceHistory(source_name, history_rates);\r\n          })}\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({curr_fiat, coin_types, latest_rates, history_rates}, ownProps) => {return {\r\n  curr_fiat,\r\n  coin: coin_types[ownProps.match.params.coin_symbol],\r\n  coin_types,\r\n  latest_rates,\r\n  history_rates\r\n}};\r\nexport default withRouter(connect(mapStateToProps, {fetchHistoryRates})(CoinHistory));\r\n","import CoinHistory from './CoinHistory';\r\nexport default CoinHistory;\r\n","import React, {Component} from 'react';\r\nimport './App.scss';\r\nimport _ from 'lodash';\r\nimport {Route, Redirect,Switch}     from 'react-router-dom';\r\nimport {connect}                    from 'react-redux';\r\nimport {fetchCoinTypes}             from '../../actions/coin_types';\r\nimport {fetchLatestRates}           from '../../actions/latest_rates';\r\nimport {UPDATE_TIMER_MINUTES}       from '../../consts';\r\nimport withLoading                  from '../misc/hoc/withLoading';\r\nimport CoinList                     from '../CoinList';\r\nimport CoinHistory                  from '../CoinHistory';\r\n\r\nclass App extends Component{\r\n  componentDidMount(){\r\n    if(_.isEmpty(this.props.coin_types))\r\n      this.props.fetchCoinTypes();\r\n\r\n    this.props.fetchLatestRates();\r\n    this.updateTimer = setInterval(this.props.fetchLatestRates, UPDATE_TIMER_MINUTES*60*1000);    \r\n  }\r\n  componentWillUnmount(){\r\n    clearInterval(this.updateTimer);\r\n  }\r\n  render(){\r\n    const {isLoading, isError} = this.props;\r\n    if(isLoading) return (<div>loading...</div>);\r\n    if(isError)   return (<div>error with fetching coin-types</div>);\r\n    return(\r\n      <div className='App'>\r\n        <Switch>\r\n          <Route  path='/history/:coin_symbol'  exact><CoinHistory/></Route>\r\n          <Route  path='/home'                  exact><CoinList className='page' /></Route>\r\n          <Route  path='/'>\r\n            <Redirect to='/home' />\r\n          </Route>\r\n        </Switch>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({coin_types, latest_rates}) => { return { coin_types, latest_rates }};\r\nconst AppWithLoading = withLoading(App, 'FETCH_COIN_TYPES');\r\nexport default connect(mapStateToProps, {fetchCoinTypes, fetchLatestRates})(AppWithLoading);\r\n","import App from './App';\r\nexport default App;\r\n","import React              from 'react';\nimport ReactDOM           from 'react-dom';\nimport reportWebVitals    from './reportWebVitals';\nimport { BrowserRouter }  from 'react-router-dom';\nimport { Provider }       from 'react-redux';\nimport thunk              from 'redux-thunk';\nimport reducers           from './reducers';\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport App from './comps/App';\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(\n  reducers,\n  composeEnhancers(applyMiddleware(thunk))\n);\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    </Provider>\n  </React.StrictMode>\n  ,document.getElementById('root')\n);\n\nreportWebVitals();\n"],"sourceRoot":""}