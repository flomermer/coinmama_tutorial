(this["webpackJsonpcoinmama-client"]=this["webpackJsonpcoinmama-client"]||[]).push([[0],{16:function(t,e,n){"use strict";var r=n(4),c=n.n(r),a=n(13),s=n(29),i=n.n(s),o="http://localhost:3000/api",u={getLatestRates:function(){var t=Object(a.a)(c.a.mark((function t(){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.get("".concat(o,"/coin-rates/latest"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),getCoinTypes:function(){var t=Object(a.a)(c.a.mark((function t(){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.get("".concat(o,"/coin-types"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),getHistoryRatesBySymbol:function(){var t=Object(a.a)(c.a.mark((function t(e){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.get("".concat(o,"/coin-rates/").concat(e));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};e.a=u},33:function(t,e,n){"use strict";n.r(e),n.d(e,"FETCH_LATEST_RATES_REQUEST",(function(){return i})),n.d(e,"FETCH_LATEST_RATES_SUCCESS",(function(){return o})),n.d(e,"FETCH_LATEST_RATES_FAILURE",(function(){return u})),n.d(e,"fetchLatestRates",(function(){return l}));var r=n(4),c=n.n(r),a=n(13),s=n(16),i="FETCH_LATEST_RATES_REQUEST",o="FETCH_LATEST_RATES_SUCCESS",u="FETCH_LATEST_RATES_FAILURE",l=function t(){return function(){var e=Object(a.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:i}),e.next=4,s.a.getLatestRates();case 4:r=e.sent,n({type:o,payload:r}),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message),n({type:u,payload:e.t0}),setTimeout((function(){t()(n)}),7e3);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}},34:function(t,e,n){"use strict";n.r(e),n.d(e,"FETCH_COIN_TYPES_REQUEST",(function(){return i})),n.d(e,"FETCH_COIN_TYPES_SUCCESS",(function(){return o})),n.d(e,"FETCH_COIN_TYPES_FAILURE",(function(){return u})),n.d(e,"fetchCoinTypes",(function(){return l}));var r=n(4),c=n.n(r),a=n(13),s=n(16),i="FETCH_COIN_TYPES_REQUEST",o="FETCH_COIN_TYPES_SUCCESS",u="FETCH_COIN_TYPES_FAILURE",l=function t(){return function(){var e=Object(a.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:i}),e.next=4,s.a.getCoinTypes();case 4:r=e.sent,n({type:o,payload:r}),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message),n({type:u,payload:e.t0}),setTimeout((function(){t()(n)}),7e3);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}},35:function(t,e,n){"use strict";n.r(e),n.d(e,"FETCH_HISTORY_RATES_REQUEST",(function(){return i})),n.d(e,"FETCH_HISTORY_RATES_SUCCESS",(function(){return o})),n.d(e,"FETCH_HISTORY_RATES_FAILURE",(function(){return u})),n.d(e,"fetchHistoryRates",(function(){return l}));var r=n(4),c=n.n(r),a=n(13),s=n(16),i="FETCH_HISTORY_RATES_REQUEST",o="FETCH_HISTORY_RATES_SUCCESS",u="FETCH_HISTORY_RATES_FAILURE",l=function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:i}),e.next=4,s.a.getHistoryRatesBySymbol(t);case 4:r=e.sent,n({type:o,payload:r}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message),n({type:u,payload:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}},52:function(t,e){t.exports={UPDATE_TIMER_MINUTES:5}},64:function(t,e,n){"use strict";n.r(e),n.d(e,"SET_CURR_FIAT",(function(){return r})),n.d(e,"setCurrFiat",(function(){return c}));var r="SET_CURR_FIAT",c=function(t){return{type:r,payload:t}}},84:function(t,e,n){},85:function(t,e,n){},86:function(t,e,n){},90:function(t,e,n){},91:function(t,e,n){"use strict";n.r(e);var r=n(1),c=n(0),a=n.n(c),s=n(25),i=n.n(s),o=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,92)).then((function(e){var n=e.getCLS,r=e.getFID,c=e.getFCP,a=e.getLCP,s=e.getTTFB;n(t),r(t),c(t),a(t),s(t)}))},u=n(22),l=n(10),p=n(51),d=n(14),f=n(64),_=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"USD",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case f.SET_CURR_FIAT:return e.payload;default:return t}},h=n(33),j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case h.FETCH_LATEST_RATES_SUCCESS:return e.payload;default:return t}},E=n(12),y=n(5),T=n.n(y),b=n(34),O=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case b.FETCH_COIN_TYPES_SUCCESS:var n=Object(E.a)(Object(E.a)({},t),T.a.keyBy(e.payload,"coin_sym"));return n;default:return t}},S=n(39),v=n(35),m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case v.FETCH_HISTORY_RATES_SUCCESS:return[].concat(Object(S.a)(t),Object(S.a)(e.payload));default:return t}},C=n(17),R=n(28),x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload,c=/(.*)_(REQUEST|FAILURE)/.exec(n);if(!c)return t;var a=Object(R.a)(c,3),s=a[1],i=a[2],o=Object(E.a)(Object(E.a)({},t),{},Object(C.a)({},s,"FAILURE"===i?r&&r.message:""));return o},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=e.type,r=/(.*)_(REQUEST|SUCCESS|FAILURE)/.exec(n);if(!r)return t;var c=Object(R.a)(r,3),a=c[1],s=c[2],i=Object(E.a)(Object(E.a)({},t),{},Object(C.a)({},a,"REQUEST"===s));return i},H=Object(d.c)({curr_fiat:_,latest_rates:j,coin_types:O,history_rates:m,error:x,loading:g}),F=n(18),A=n(19),U=n(21),I=n(20),L=(n(84),n(3)),N=n(34),k=n(33),w=n(52),Y=function(t,e){var n=function(e){Object(U.a)(c,e);var n=Object(I.a)(c);function c(){return Object(F.a)(this,c),n.apply(this,arguments)}return Object(A.a)(c,[{key:"render",value:function(){return Object(r.jsx)(t,Object(E.a)({},this.props))}}]),c}(a.a.Component);return Object(l.b)((function(t){var n=t.loading,r=t.error;return{isLoading:n[e],isError:r[e]}}))(n)},P=(n(85),n(86),n(27)),D=n.n(P),M=Object(l.b)((function(t){return{curr_fiat:t.curr_fiat}}))((function(t){var e=t.className,n=t.coin,c=t.rates,a=t.curr_fiat,s=t.onClick,i=T.a.round(c.reduce((function(t,e){return t+e.rate}),0)/c.length,2);return isNaN(i)||0===i?null:Object(r.jsxs)("div",{className:"CoinListItem ".concat(e),onClick:s,children:[Object(r.jsxs)("header",{children:[Object(r.jsx)("div",{className:"symbol",children:n.coin_sym}),Object(r.jsxs)("div",{className:"avg",children:[i.toLocaleString()," ",a]})]}),Object(r.jsxs)("div",{className:"sources",children:[Object(r.jsx)("header",{className:"full-row",children:"Sources Latest Prices"}),c.map((function(t){return Object(r.jsxs)("div",{className:"source",children:[Object(r.jsx)("div",{className:"name",children:t.source_name}),Object(r.jsxs)("div",{className:"price",children:[T.a.round(t.rate,2).toLocaleString()," ",a]}),Object(r.jsx)("div",{className:"at",children:D()(t.at).format("DD/MM HH:mm")})]},t.source_id)}))]})]})})),Q=Object(L.g)(Y((function(t){var e=t.className,n=t.isLoading,c=t.isError,a=t.latest_rates,s=t.coin_types,i=t.history;return n?Object(r.jsx)("div",{children:"loading..."}):c?Object(r.jsx)("div",{children:"error!"}):a&&s?Object(r.jsx)("div",{className:"CoinList ".concat(e),children:T.a.map(s,(function(t){return Object(r.jsx)(M,{className:"card",coin:t,rates:a.filter((function(e){return e.coin_type_id===t.coin_id})),onClick:function(){return i.push("/history/".concat(t.coin_sym))}},t.coin_sym)}))}):null}),"FETCH_LATEST_RATES")),B=Object(l.b)((function(t){return{latest_rates:t.latest_rates,curr_fiat:t.curr_fiat,coin_types:t.coin_types}}))(Q),J=(n(90),n(35)),X=function(t){Object(U.a)(n,t);var e=Object(I.a)(n);function n(){return Object(F.a)(this,n),e.apply(this,arguments)}return Object(A.a)(n,[{key:"componentDidMount",value:function(){var t=this.props,e=t.history_rates,n=t.coin;n&&(0!==e.length&&0!==e.filter((function(t){return t.coin_sym===n.coin_sym})).length||this.props.fetchHistoryRates(n.coin_sym))}},{key:"renderSourceHistory",value:function(t,e){var n=this;return Object(r.jsxs)("div",{className:"source-history",children:[Object(r.jsx)("header",{children:t}),Object(r.jsx)("main",{children:T.a.orderBy(e,"at","desc").map((function(t,e){return Object(r.jsxs)("div",{className:"record",children:[Object(r.jsx)("div",{children:D()(t.at).format("DD/MM/YY HH:mm")}),Object(r.jsxs)("div",{children:[T.a.round(t.rate,2).toLocaleString()," ",n.props.curr_fiat]})]},e)}))})]},t)}},{key:"render",value:function(){var t=this,e=this.props,n=e.coin,c=e.coin_types,a=e.latest_rates,s=e.history_rates;if(!T.a.isEmpty(c)&&!n)return Object(r.jsx)(L.a,{to:"/home"});if(!a)return null;var i=T.a.groupBy(s,"source_name");return Object(r.jsxs)("div",{className:"CoinHistory page ".concat(this.props.className),children:[Object(r.jsxs)("header",{children:[Object(r.jsx)(M,{className:"card",coin:n,rates:a.filter((function(t){return t.coin_type_id===n.coin_id})),onClick:function(){return t.props.history.push("/home")}}),";"]}),Object(r.jsx)("main",{className:"history",children:T.a.map(i,(function(e,n){return t.renderSourceHistory(n,e)}))})]})}}]),n}(c.Component),V=Object(L.g)(Object(l.b)((function(t,e){var n=t.curr_fiat,r=t.coin_types,c=t.latest_rates,a=t.history_rates;return{curr_fiat:n,coin:r[e.match.params.coin_symbol],coin_types:r,latest_rates:c,history_rates:a}}),{fetchHistoryRates:J.fetchHistoryRates})(X)),W=Y(function(t){Object(U.a)(n,t);var e=Object(I.a)(n);function n(){return Object(F.a)(this,n),e.apply(this,arguments)}return Object(A.a)(n,[{key:"componentDidMount",value:function(){T.a.isEmpty(this.props.coin_types)&&this.props.fetchCoinTypes(),this.props.fetchLatestRates(),this.updateTimer=setInterval(this.props.fetchLatestRates,60*w.UPDATE_TIMER_MINUTES*1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.updateTimer)}},{key:"render",value:function(){var t=this.props,e=t.isLoading,n=t.isError;return e?Object(r.jsx)("div",{children:"loading..."}):n?Object(r.jsx)("div",{children:"error with fetching coin-types"}):Object(r.jsx)("div",{className:"App",children:Object(r.jsxs)(L.d,{children:[Object(r.jsx)(L.b,{path:"/history/:coin_symbol",exact:!0,children:Object(r.jsx)(V,{})}),Object(r.jsx)(L.b,{path:"/home",exact:!0,children:Object(r.jsx)(B,{className:"page"})}),Object(r.jsx)(L.b,{path:"/",children:Object(r.jsx)(L.a,{to:"/home"})})]})})}}]),n}(c.Component),"FETCH_COIN_TYPES"),q=Object(l.b)((function(t){return{coin_types:t.coin_types,latest_rates:t.latest_rates}}),{fetchCoinTypes:N.fetchCoinTypes,fetchLatestRates:k.fetchLatestRates})(W),z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||d.d,G=Object(d.e)(H,z(Object(d.a)(p.a)));i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(l.a,{store:G,children:Object(r.jsx)(u.a,{children:Object(r.jsx)(q,{})})})}),document.getElementById("root")),o()}},[[91,1,2]]]);
//# sourceMappingURL=main.a3d894c5.chunk.js.map