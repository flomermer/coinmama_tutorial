{"version":3,"sources":["apis/myAPI.js","actions/latest_rates.js","actions/coin_types.js","actions/history_rates.js","consts.js","actions/curr_fiat.js","reportWebVitals.js","reducers/curr_fiat_reducer.js","reducers/latest_rates_reducer.js","reducers/coin_types_reducer.js","reducers/history_rates_reducer.js","reducers/error_reducer.js","reducers/loading_reducer.js","reducers/index.js","comps/misc/hoc/withLoading/index.js","comps/misc/hoc/withLoading/withLoading.js","comps/misc/utils.js","comps/CoinCard/index.js","comps/CoinCard/CoinCard.js","comps/CoinList/CoinList.js","comps/CoinList/index.js","comps/CoinHistory/SourceHistory/index.js","comps/CoinHistory/SourceHistory/SourceHistory.js","comps/CoinHistory/CoinHistory.js","comps/CoinHistory/index.js","comps/App/App.js","comps/App/index.js","index.js"],"names":["ROOT_URL","myAPI","getLatestRates","a","axios","get","latest_rates","data","getCoinTypes","coin_types","getHistoryRatesBySymbol","symbol","history_rates","FETCH_LATEST_RATES_REQUEST","FETCH_LATEST_RATES_SUCCESS","FETCH_LATEST_RATES_FAILURE","fetchLatestRates","dispatch","type","payload","console","log","message","setTimeout","FETCH_COIN_TYPES_REQUEST","FETCH_COIN_TYPES_SUCCESS","FETCH_COIN_TYPES_FAILURE","fetchCoinTypes","FETCH_HISTORY_RATES_REQUEST","FETCH_HISTORY_RATES_SUCCESS","FETCH_HISTORY_RATES_FAILURE","fetchHistoryRates","module","exports","UPDATE_TIMER_MINUTES","SET_CURR_FIAT","setCurrFiat","fiatStr","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ACTIONS","require","curr_fiat_reducer","state","action","latest_rates_reducer","mapCoinTypes","_","keyBy","history_rates_reducer","errorReducer","matches","exec","requestName","requestState","newState","loadingReducer","combineReducers","curr_fiat","error","loading","withLoading","WrappedComponent","fetchStr","WithLoading","this","props","React","Component","connect","isLoading","isError","formatPrice","number","round","toFixed","toLocaleString","formatDateTime","datetime","moment","format","CoinCard","className","coin","rates","onClick","avgRate","reduce","acc","source","rate","length","isNaN","calculateAvgRate","coin_sym","map","source_name","at","source_id","CoinListWithLoading","withRouter","history","filteredRates","filter","coin_type_id","coin_id","push","CoinList","SourceHistory","sourceName","historyRates","orderBy","index","CoinHistory","isEmpty","to","history_rates_obj","groupBy","ownProps","match","params","coin_symbol","AppWithLoading","updateTimer","setInterval","clearInterval","path","exact","App","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","thunk","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.16143a22.chunk.js","sourcesContent":["import axios from 'axios';\r\nconst env = {\r\n  prod: {\r\n    root_url: 'http://localhost:3000/api'\r\n  },\r\n  dev: {\r\n    root_url: 'http://localhost:3000/api'\r\n  }\r\n}\r\nconst ROOT_URL = (process.env.NODE_ENV==='production') ?  env.prod.root_url : env.dev.root_url;\r\n\r\nconst myAPI = {\r\n  getLatestRates: async () => {\r\n    const latest_rates = await axios.get(`${ROOT_URL}/coin-rates/latest`);\r\n    return latest_rates.data;\r\n  },\r\n  getCoinTypes:   async () => {\r\n    const coin_types = await axios.get(`${ROOT_URL}/coin-types`);\r\n    return coin_types.data;\r\n  },\r\n  getHistoryRatesBySymbol: async (symbol) => {\r\n    const history_rates = await axios.get(`${ROOT_URL}/coin-rates/${symbol}`);\r\n    return history_rates.data;\r\n  }\r\n}\r\n\r\nexport default myAPI;\r\n","import myAPI   from '../apis/myAPI';\r\n\r\nexport const FETCH_LATEST_RATES_REQUEST     =       'FETCH_LATEST_RATES_REQUEST';\r\nexport const FETCH_LATEST_RATES_SUCCESS     =       'FETCH_LATEST_RATES_SUCCESS';\r\nexport const FETCH_LATEST_RATES_FAILURE     =       'FETCH_LATEST_RATES_FAILURE';\r\n\r\nexport const fetchLatestRates = () => async dispatch => {\r\n  try{\r\n    dispatch({type: FETCH_LATEST_RATES_REQUEST});\r\n    const latest_rates = await myAPI.getLatestRates();    \r\n    dispatch({type: FETCH_LATEST_RATES_SUCCESS,  payload: latest_rates});\r\n  }catch(e){\r\n    console.log(e.message);\r\n    dispatch({type: FETCH_LATEST_RATES_FAILURE, payload: e});\r\n    setTimeout(function(){\r\n      fetchLatestRates()(dispatch); //will try fetching again after timer.\r\n    },7000);\r\n  }\r\n}\r\n","import myAPI   from '../apis/myAPI';\r\n\r\nexport const FETCH_COIN_TYPES_REQUEST     =       'FETCH_COIN_TYPES_REQUEST';\r\nexport const FETCH_COIN_TYPES_SUCCESS     =       'FETCH_COIN_TYPES_SUCCESS';\r\nexport const FETCH_COIN_TYPES_FAILURE     =       'FETCH_COIN_TYPES_FAILURE';\r\n\r\nexport const fetchCoinTypes = () => async dispatch => {\r\n  try{\r\n    dispatch({type: FETCH_COIN_TYPES_REQUEST});\r\n    const coin_types = await myAPI.getCoinTypes();\r\n    dispatch({type: FETCH_COIN_TYPES_SUCCESS,  payload: coin_types});\r\n  }catch(e){\r\n    console.log(e.message);\r\n    dispatch({type: FETCH_COIN_TYPES_FAILURE, payload: e});\r\n    setTimeout(function(){\r\n      fetchCoinTypes()(dispatch); //will try fetching again after timer.\r\n    },7000);\r\n  }\r\n}\r\n","import myAPI   from '../apis/myAPI';\r\n\r\nexport const FETCH_HISTORY_RATES_REQUEST     =       'FETCH_HISTORY_RATES_REQUEST';\r\nexport const FETCH_HISTORY_RATES_SUCCESS     =       'FETCH_HISTORY_RATES_SUCCESS';\r\nexport const FETCH_HISTORY_RATES_FAILURE     =       'FETCH_HISTORY_RATES_FAILURE';\r\n\r\nexport const fetchHistoryRates = (symbol) => async dispatch => {\r\n  try{\r\n    dispatch({type: FETCH_HISTORY_RATES_REQUEST});\r\n    const history_rates = await myAPI.getHistoryRatesBySymbol(symbol);    \r\n    dispatch({type: FETCH_HISTORY_RATES_SUCCESS,  payload: history_rates});\r\n  }catch(e){\r\n    console.log(e.message);\r\n    dispatch({type: FETCH_HISTORY_RATES_FAILURE, payload: e});\r\n  }\r\n}\r\n","const consts = {\r\n  UPDATE_TIMER_MINUTES: 5\r\n}\r\n\r\nmodule.exports = consts;\r\n","export const SET_CURR_FIAT      =       'SET_CURR_FIAT';\r\n\r\nexport const setCurrFiat = (fiatStr) => {\r\n  return {\r\n    type: SET_CURR_FIAT,\r\n    payload: fiatStr\r\n  }\r\n}\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","const ACTIONS = require('../actions/curr_fiat');\r\n\r\nconst curr_fiat_reducer = (state='USD', action) => {\r\n  switch(action.type){\r\n    case ACTIONS.SET_CURR_FIAT:\r\n      return action.payload;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default curr_fiat_reducer;\r\n","const ACTIONS = require('../actions/latest_rates');\r\n\r\nconst latest_rates_reducer = (state=[], action) => {\r\n  switch(action.type){\r\n    case ACTIONS.FETCH_LATEST_RATES_SUCCESS:\r\n      return action.payload;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default latest_rates_reducer;\r\n","import _ from 'lodash';\r\nconst ACTIONS = require('../actions/coin_types');\r\n\r\n\r\nconst latest_rates_reducer = (state={}, action) => {\r\n  switch(action.type){\r\n    case ACTIONS.FETCH_COIN_TYPES_SUCCESS:\r\n      let mapCoinTypes = {...state, ..._.keyBy(action.payload, 'coin_sym')}; //convert array to mapped object\r\n      return mapCoinTypes;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default latest_rates_reducer;\r\n","const ACTIONS = require('../actions/history_rates');\r\n\r\n\r\nconst history_rates_reducer = (state=[], action) => {\r\n  switch(action.type){\r\n    case ACTIONS.FETCH_HISTORY_RATES_SUCCESS:\r\n      return [...state, ...action.payload];\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default history_rates_reducer;\r\n","\r\nconst errorReducer = (state = {}, action) => {\r\n  const { type, payload } = action;\r\n  const matches = /(.*)_(REQUEST|FAILURE)/.exec(type);\r\n\r\n  // not a *_REQUEST / *_FAILURE actions, so we ignore them\r\n  if (!matches) return state;\r\n  const [, requestName, requestState] = matches;\r\n  const newState = {...state, [requestName]: requestState === 'FAILURE' ? payload && payload.message : '',};  \r\n\r\n  return newState;\r\n};\r\n\r\nexport default errorReducer;\r\n","\r\nconst loadingReducer = (state = {}, action) => {\r\n  const { type } = action;\r\n  const matches = /(.*)_(REQUEST|SUCCESS|FAILURE)/.exec(type);\r\n\r\n  // not a *_REQUEST / *_SUCCESS /  *_FAILURE actions, so we ignore them\r\n  if (!matches) return state;\r\n\r\n  const [, requestName, requestState] = matches;\r\n  const newState = {\r\n    ...state,\r\n    [requestName]: requestState === 'REQUEST',\r\n  };\r\n  return newState;\r\n};\r\n\r\nexport default loadingReducer;\r\n","import { combineReducers }  from 'redux';\r\nimport curr_fiat            from './curr_fiat_reducer';\r\nimport latest_rates         from './latest_rates_reducer';\r\nimport coin_types           from './coin_types_reducer';\r\nimport history_rates        from './history_rates_reducer';\r\nimport error                from './error_reducer';\r\nimport loading              from './loading_reducer';\r\n\r\nexport default combineReducers({\r\n    curr_fiat, //in future -> could be set to another fiat -> which will convert all rates according to new_fiat price\r\n    latest_rates,\r\n    coin_types,\r\n    history_rates,\r\n    error,\r\n    loading\r\n})\r\n","import withLoading from './withLoading';\r\nexport default withLoading;\r\n","import React      from 'react';\r\nimport {connect}  from 'react-redux';\r\n\r\nconst withLoading = (WrappedComponent, fetchStr) => {\r\n  const mapStateToProps = ({loading, error}) => { return { isLoading: loading[fetchStr], isError: error[fetchStr] }};\r\n  \r\n  class WithLoading extends React.Component {\r\n    render() {\r\n      return <WrappedComponent {...this.props}/>;\r\n    }\r\n  };\r\n  return connect(mapStateToProps)(WithLoading);\r\n}\r\n\r\n\r\nexport default withLoading;\r\n","import _ from 'lodash';\r\nimport moment from 'moment';\r\n\r\nexport const calculateAvgRate = (rates) => {\r\n  const avgRate = _.round(rates.reduce((acc, source) => acc+source.rate,0)/rates.length,2);\r\n  if(isNaN(avgRate) || avgRate===0)\r\n    return null;\r\n  return avgRate;\r\n}\r\n\r\nexport const formatPrice = (number, fiatStr) => {\r\n  return `${_.round(number,2).toFixed(2).toLocaleString()} ${fiatStr}`;\r\n}\r\n\r\nexport const formatDateTime = (datetime) => {\r\n  return moment(datetime).format('DD/MM/YY HH:mm');\r\n}\r\n","import CoinCard from './CoinCard';\r\nexport default CoinCard;\r\n","import React from 'react';\r\nimport './CoinCard.scss';\r\nimport {connect} from 'react-redux';\r\nimport {calculateAvgRate, formatPrice, formatDateTime} from '../misc/utils';\r\n\r\nconst CoinCard = ({className, coin, rates, curr_fiat, onClick}) => {\r\n  const avgRate = calculateAvgRate(rates);\r\n  if(!avgRate) return null;\r\n  return (\r\n    <div className={`CoinCard ${className}`} onClick={onClick}>\r\n      <header>\r\n        <div className='symbol'>{coin.coin_sym}</div>\r\n        <div className='avg'></div>\r\n      </header>\r\n      <div className='sources'>\r\n        <header className='full-row'>Sources Latest Prices</header>\r\n        {rates.map(source => {\r\n          return (\r\n            <div className='source' key={source.source_id}>\r\n              <div className='name'>{source.source_name}</div>\r\n              <div className='price'>{formatPrice(source.rate, curr_fiat)}</div>\r\n              <div className='at'>{formatDateTime(source.at)}</div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = ({curr_fiat}) => { return { curr_fiat }};\r\nexport default connect(mapStateToProps)(CoinCard);\r\n","import React from 'react';\r\nimport './CoinList.scss';\r\nimport _ from 'lodash';\r\nimport {connect}            from 'react-redux';\r\nimport {withRouter}         from 'react-router-dom';\r\nimport withLoading          from '../misc/hoc/withLoading';\r\nimport CoinCard             from '../CoinCard';\r\n\r\nconst CoinList = (props) => {\r\n  const {className, isLoading, isError, latest_rates, coin_types, history} = props;\r\n  if(isLoading)     return (<div>loading...</div>);\r\n  if(isError)       return (<div>error!</div>);\r\n  if(!latest_rates || !coin_types)  return null;\r\n\r\n  return (\r\n    <div className={`CoinList ${className}`}>\r\n        {_.map(coin_types, coin => {\r\n          const filteredRates = latest_rates.filter(rate => rate.coin_type_id===coin.coin_id);\r\n          return  <CoinCard       key={coin.coin_sym} coin={coin} rates={filteredRates}\r\n                                  onClick={() => history.push(`/history/${coin.coin_sym}`)}\r\n                  />;\r\n        })}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = ({latest_rates, curr_fiat, coin_types}) => { return { latest_rates, curr_fiat, coin_types }};\r\nconst CoinListWithLoading = withRouter(withLoading(CoinList, 'FETCH_LATEST_RATES'));\r\nexport default connect(mapStateToProps)(CoinListWithLoading);\r\n","import CoinList from './CoinList';\r\nexport default CoinList;\r\n","import SourceHistory from './SourceHistory';\r\nexport default SourceHistory;\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport {connect} from 'react-redux';\r\nimport {formatPrice, formatDateTime} from '../../misc/utils';\r\n\r\nconst SourceHistory = ({className, sourceName, historyRates, curr_fiat}) => {\r\n  return (\r\n    <div className={`SourceHistory ${className}`}>\r\n      <header>{sourceName}</header>\r\n      <main>\r\n        {_.orderBy(historyRates, 'at', 'desc').map((rate,index) => {\r\n          return (\r\n            <div className='record' key={index}>\r\n              <div>{formatDateTime(rate.at)}</div>\r\n              <div>{formatPrice(rate.rate, curr_fiat)}</div>\r\n            </div>\r\n          );\r\n        })}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = ({curr_fiat}) => { return { curr_fiat }};\r\n\r\nexport default connect(mapStateToProps)(SourceHistory);\r\n","import React,{Component} from 'react';\r\nimport './CoinHistory.scss';\r\nimport _ from 'lodash';\r\nimport {connect} from 'react-redux';\r\nimport {fetchHistoryRates}    from '../../actions/history_rates';\r\nimport {withRouter, Redirect} from 'react-router-dom'\r\nimport CoinCard               from '../CoinCard';\r\nimport SourceHistory          from './SourceHistory';\r\n\r\nclass CoinHistory extends Component{\r\n  componentDidMount(){\r\n    const {history_rates, coin} = this.props;\r\n    if(!coin)\r\n      return;\r\n    if(history_rates.length===0)\r\n      this.props.fetchHistoryRates(coin.coin_sym);\r\n  }\r\n  render(){\r\n    const {coin, coin_types, latest_rates, history_rates} = this.props;\r\n    if(!_.isEmpty(coin_types) && !coin) return <Redirect to='/home'/>;\r\n    if(!latest_rates) return null;\r\n    const history_rates_obj = _.groupBy(history_rates, 'source_name');\r\n\r\n    return(\r\n      <div className={`CoinHistory page ${this.props.className}`}>\r\n        <header>\r\n          <CoinCard coin={coin} rates={latest_rates} onClick={() => this.props.history.push(`/home`)} />\r\n        </header>\r\n        <main className='history'>\r\n          {_.map(history_rates_obj, (historyRates, sourceName) =>\r\n               <SourceHistory key={sourceName} sourceName={sourceName} historyRates={historyRates} />\r\n          )}\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({curr_fiat, coin_types, latest_rates, history_rates}, ownProps) => {\r\n  const coin = coin_types[ownProps.match.params.coin_symbol];\r\n  return {\r\n    curr_fiat,\r\n    coin,\r\n    coin_types,\r\n    latest_rates:  latest_rates.filter(rate  => rate.coin_sym===coin.coin_sym),\r\n    history_rates: history_rates.filter(rate => rate.coin_sym===coin.coin_sym)\r\n}};\r\nexport default withRouter(connect(mapStateToProps, {fetchHistoryRates})(CoinHistory));\r\n","import CoinHistory from './CoinHistory';\r\nexport default CoinHistory;\r\n","import React, {Component} from 'react';\r\nimport './App.scss';\r\nimport _ from 'lodash';\r\nimport {Route, Redirect,Switch}     from 'react-router-dom';\r\nimport {connect}                    from 'react-redux';\r\nimport {fetchCoinTypes}             from '../../actions/coin_types';\r\nimport {fetchLatestRates}           from '../../actions/latest_rates';\r\nimport {UPDATE_TIMER_MINUTES}       from '../../consts';\r\nimport withLoading                  from '../misc/hoc/withLoading';\r\nimport CoinList                     from '../CoinList';\r\nimport CoinHistory                  from '../CoinHistory';\r\n\r\nclass App extends Component{\r\n  componentDidMount(){\r\n    if(_.isEmpty(this.props.coin_types))\r\n      this.props.fetchCoinTypes();\r\n\r\n    this.props.fetchLatestRates();\r\n    this.updateTimer = setInterval(this.props.fetchLatestRates, UPDATE_TIMER_MINUTES*60*1000);    \r\n  }\r\n  componentWillUnmount(){\r\n    clearInterval(this.updateTimer);\r\n  }\r\n  render(){\r\n    const {isLoading, isError} = this.props;\r\n    if(isLoading) return (<div>loading...</div>);\r\n    if(isError)   return (<div>error with fetching coin-types</div>);\r\n    return(\r\n      <div className='App'>\r\n        <Switch>\r\n          <Route  path='/history/:coin_symbol'  exact><CoinHistory/></Route>\r\n          <Route  path='/home'                  exact><CoinList className='page' /></Route>\r\n          <Route  path='/'>\r\n            <Redirect to='/home' />\r\n          </Route>\r\n        </Switch>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({coin_types, latest_rates}) => { return { coin_types, latest_rates }};\r\nconst AppWithLoading = withLoading(App, 'FETCH_COIN_TYPES');\r\nexport default connect(mapStateToProps, {fetchCoinTypes, fetchLatestRates})(AppWithLoading);\r\n","import App from './App';\r\nexport default App;\r\n","import React              from 'react';\nimport ReactDOM           from 'react-dom';\nimport reportWebVitals    from './reportWebVitals';\nimport { BrowserRouter }  from 'react-router-dom';\nimport { Provider }       from 'react-redux';\nimport thunk              from 'redux-thunk';\nimport reducers           from './reducers';\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport App from './comps/App';\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(\n  reducers,\n  composeEnhancers(applyMiddleware(thunk))\n);\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    </Provider>\n  </React.StrictMode>\n  ,document.getElementById('root')\n);\n\nreportWebVitals();\n"],"sourceRoot":""}